<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gazastreifen auf der Schweizer Karte</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/leaflet-path-drag@1.1.0/dist/L.Path.Drag.min.js"></script>
    <style>
        body { margin: 0; padding: 0; }
        #map { position: absolute; top: 0; bottom: 0; width: 100%; }
        .gaza-label { background-color: transparent; border: none; box-shadow: none; font-weight: bold; color: white; text-shadow: 1px 1px 2px black; }
    </style>
</head>
<body>
    <div id="map"></div>
    <script>
        // 1. Karte initialisieren und auf die Schweiz zentrieren
        var map = L.map('map').setView([46.948, 7.4474], 8); // Auf Bern zentriert

        // 2. Hintergrundkarte laden
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 18,
            attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
        }).addTo(map);

        // 3. Original-Geodaten für den Gazastreifen
        var gazaGeoJSON = {
          "type": "FeatureCollection",
          "features": [
            { "type": "Feature", "properties": { "name": "Gazastreifen" }, "geometry": { "type": "Polygon", "coordinates": [[ [34.33232, 31.22502], [34.22669, 31.30959], [34.24803, 31.36592], [34.2205, 31.42225], [34.28292, 31.49257], [34.34533, 31.54225], [34.41727, 31.56592], [34.48292, 31.59624], [34.54227, 31.61657], [34.56361, 31.59959], [34.46903, 31.50592], [34.40661, 31.43225], [34.35824, 31.33259], [34.33232, 31.22502] ]]}},
            { "type": "Feature", "properties": { "name": "Gaza-Stadt" }, "geometry": { "type": "Point", "coordinates": [34.4667, 31.5] } },
            { "type": "Feature", "properties": { "name": "Chan Yunis" }, "geometry": { "type": "Point", "coordinates": [34.3, 31.35] } },
            { "type": "Feature", "properties": { "name": "Rafah" }, "geometry": { "type": "Point", "coordinates": [34.25, 31.2833] } }
          ]
        };

        // --- NEUER ABSCHNITT: Gazastreifen programmatisch über Bern legen ---
        var bernCoords = { lat: 46.948, lon: 7.4474 };
        var gazaCityCoords = { lat: 31.5, lon: 34.4667 };

        // Berechne den geografischen Versatz (Offset)
        var latOffset = bernCoords.lat - gazaCityCoords.lat;
        var lonOffset = bernCoords.lon - gazaCityCoords.lon;

        // Wende den Versatz auf JEDEN Punkt der Gaza-Daten an
        gazaGeoJSON.features.forEach(function(feature) {
            if (feature.geometry.type === 'Polygon') {
                feature.geometry.coordinates[0].forEach(function(point) {
                    point[0] += lonOffset; // Längengrad anpassen
                    point[1] += latOffset; // Breitengrad anpassen
                });
            } else if (feature.geometry.type === 'Point') {
                feature.geometry.coordinates[0] += lonOffset;
                feature.geometry.coordinates[1] += latOffset;
            }
        });
        // --- ENDE DES NEUEN ABSCHNITTS ---


        // 4. Den verschobenen Gazastreifen auf der Karte platzieren und gestalten
        var gazaLayer = L.geoJSON(gazaGeoJSON, {
            style: function(feature) {
                if (feature.geometry.type === 'Polygon') {
                    return { color: "#e60000", weight: 2, fillColor: "#e60000", fillOpacity: 0.4 };
                }
            },
            onEachFeature: function(feature, layer) {
                if (feature.properties && feature.properties.name) {
                    layer.bindTooltip(feature.properties.name, { permanent: true, direction: 'center', className: 'gaza-label' });
                }
            },
            pointToLayer: function(feature, latlng) {
                return L.circleMarker(latlng, { radius: 4, fillColor: "#ffffff", color: "#000", weight: 1, opacity: 1, fillOpacity: 0.8 });
            }
        }).addTo(map);

        // 5. Die Funktion zum Verschieben aktivieren
        gazaLayer.dragging.enable();
    </script>
</body>
</html>
